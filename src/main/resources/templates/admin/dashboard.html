<!DOCTYPE html>
<html lang="bg" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª - UFC –ë—ä–ª–≥–∞—Ä–∏—è</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <a th:href="@{/}" class="logo">
                    <div class="logo-icon">UFC</div>
                    <h1>UFC –ë—ä–ª–≥–∞—Ä–∏—è - –ê–¥–º–∏–Ω</h1>
                </a>
                <div class="auth-buttons">
                    <div sec:authorize="isAuthenticated()" class="user-info">
                        <span class="user-welcome">–ó–¥—Ä–∞–≤–µ–π, <strong sec:authentication="name">Admin</strong>!</span>
                        <form th:action="@{/logout}" method="post" style="display: inline;">
                            <button type="submit" class="btn btn-danger">–ò–∑—Ö–æ–¥</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <nav>
        <div class="container">
            <div class="nav-content">
                <ul class="nav-links">
                    <li><a th:href="@{/}" class="active">–ù–∞—á–∞–ª–æ</a></li>
                    <li><a th:href="@{/admin/dashboard}" class="active">–¢–∞–±–ª–æ</a></li>
                    <li><a th:href="@{/admin/users}">–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏</a></li>
                    <li><a th:href="@{/admin/topics}">–¢–µ–º–∏</a></li>
                    <li><a th:href="@{/admin/comments}">–ö–æ–º–µ–Ω—Ç–∞—Ä–∏</a></li>
                    <li><a th:href="@{/admin/analytics}">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <main class="container">
        <div class="admin-dashboard">
            <h2>üìä –ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª - –û–±—â –ü—Ä–µ–≥–ª–µ–¥</h2>

            <!-- Statistics Overview -->
            <div class="admin-stats-grid">
                <div class="admin-stat-card">
                    <div class="stat-icon">üë•</div>
                    <div class="stat-info">
                        <div class="stat-value" th:text="${stats.totalUsers}">0</div>
                        <div class="stat-label">–û–±—â–æ –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏</div>
                        <div class="stat-details">
                            <span class="stat-detail-item">
                                <span class="stat-detail-label">–ê–∫—Ç–∏–≤–Ω–∏:</span>
                                <span class="stat-detail-value" th:text="${stats.activeUsers}">0</span>
                            </span>
                            <span class="stat-detail-item">
                                <span class="stat-detail-label">–ë–ª–æ–∫–∏—Ä–∞–Ω–∏:</span>
                                <span class="stat-detail-value" th:text="${stats.bannedUsers}">0</span>
                            </span>
                        </div>
                    </div>
                </div>

                <div class="admin-stat-card">
                    <div class="stat-icon">üìù</div>
                    <div class="stat-info">
                        <div class="stat-value" th:text="${stats.totalTopics}">0</div>
                        <div class="stat-label">–û–±—â–æ –¢–µ–º–∏</div>
                    </div>
                </div>

                <div class="admin-stat-card">
                    <div class="stat-icon">üí¨</div>
                    <div class="stat-info">
                        <div class="stat-value" th:text="${stats.totalPosts}">0</div>
                        <div class="stat-label">–û–±—â–æ –ü–æ—Å—Ç–æ–≤–µ</div>
                    </div>
                </div>

                <div class="admin-stat-card">
                    <div class="stat-icon">üí≠</div>
                    <div class="stat-info">
                        <div class="stat-value" th:text="${stats.totalComments}">0</div>
                        <div class="stat-label">–û–±—â–æ –ö–æ–º–µ–Ω—Ç–∞—Ä–∏</div>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="admin-content-grid">
                <section class="admin-section">
                    <h3>üë• –ù–æ–≤–∏ –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏</h3>
                    <div class="admin-list">
                        <div th:if="${recentUsers.isEmpty()}" class="empty-state">
                            <p>–ù—è–º–∞ –Ω–æ–≤–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏</p>
                        </div>
                        <div th:each="user : ${recentUsers}" class="admin-list-item">
                            <div class="admin-list-info">
                                <strong th:text="${user.username}">Username</strong>
                                <span class="admin-list-meta">
                                    <span th:text="${user.email}">email@example.com</span> ‚Ä¢
                                    <span th:text="${#temporals.format(user.createdAt, 'dd.MM.yyyy HH:mm')}">date</span>
                                </span>
                            </div>
                            <div class="admin-list-actions">
                                <a th:href="@{/admin/users/{id}/edit(id=${user.id})}" class="btn-admin-small">–†–µ–¥–∞–∫—Ç–∏—Ä–∞–π</a>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="admin-section">
                    <h3>üìù –ü–æ—Å–ª–µ–¥–Ω–∏ –¢–µ–º–∏</h3>
                    <div class="admin-list">
                        <div th:if="${recentTopics.isEmpty()}" class="empty-state">
                            <p>–ù—è–º–∞ –Ω–æ–≤–∏ —Ç–µ–º–∏</p>
                        </div>
                        <div th:each="topic : ${recentTopics}" class="admin-list-item">
                            <div class="admin-list-info">
                                <strong><a th:href="@{/forum/topic/{id}(id=${topic.id})}" th:text="${topic.title}">Topic Title</a></strong>
                                <span class="admin-list-meta">
                                    –æ—Ç <span th:text="${topic.author.username}">author</span> ‚Ä¢
                                    <span th:text="${#temporals.format(topic.createdAt, 'dd.MM.yyyy HH:mm')}">date</span>
                                </span>
                            </div>
                            <div class="admin-list-actions">
                                <form th:if="${!topic.pinned}" th:action="@{/admin/topics/{id}/pin(id=${topic.id})}" method="post" style="display: inline;">
                                    <button type="submit" class="btn-admin-small">üìå –ó–∞–∫–∞—á–∏</button>
                                </form>
                                <form th:if="${topic.pinned}" th:action="@{/admin/topics/{id}/unpin(id=${topic.id})}" method="post" style="display: inline;">
                                    <button type="submit" class="btn-admin-small">üìå –û—Ç–∫–∞—á–∏</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Quick Actions -->
            <section class="admin-section">
                <h3>‚ö° –ë—ä—Ä–∑–∏ –î–µ–π—Å—Ç–≤–∏—è</h3>
                <div class="admin-quick-actions">
                    <a th:href="@{/admin/users}" class="admin-action-btn">
                        <span class="action-icon">üë•</span>
                        <span class="action-text">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏</span>
                    </a>
                    <a th:href="@{/admin/topics}" class="admin-action-btn">
                        <span class="action-icon">üìù</span>
                        <span class="action-text">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –¢–µ–º–∏</span>
                    </a>
                    <a th:href="@{/admin/comments}" class="admin-action-btn">
                        <span class="action-icon">üí≠</span>
                        <span class="action-text">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –ö–æ–º–µ–Ω—Ç–∞—Ä–∏</span>
                    </a>
                    <a th:href="@{/admin/analytics}" class="admin-action-btn">
                        <span class="action-icon">üìä</span>
                        <span class="action-text">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –ê–Ω–∞–ª–∏–∑–∏</span>
                    </a>
                </div>
            </section>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2024 UFC –ë—ä–ª–≥–∞—Ä–∏—è –§–æ—Ä—É–º - –ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª</p>
            </div>
        </div>
    </footer>
</body>
</html>

