<!DOCTYPE html>
<html lang="bg" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UFC –ë—ä–ª–≥–∞—Ä–∏—è - –û—Ñ–∏—Ü–∏–∞–ª–µ–Ω –§–æ—Ä—É–º</title>
    <meta name="description" content="–ù–∞–π-–≥–æ–ª–µ–º–∏—è—Ç –±—ä–ª–≥–∞—Ä—Å–∫–∏ —Ñ–æ—Ä—É–º –∑–∞ UFC, MMA –∏ –±–æ–π–Ω–∏ —Å–ø–æ—Ä—Ç–æ–≤–µ. –î–∏—Å–∫—É—Å–∏–∏, –Ω–æ–≤–∏–Ω–∏, –∞–Ω–∞–ª–∏–∑–∏ –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏.">
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <a th:href="@{/}" class="logo">
                    <div class="logo-icon">UFC</div>
                    <h1>UFC –ë—ä–ª–≥–∞—Ä–∏—è</h1>
                </a>
                <div class="auth-buttons">
                    <!-- Show these buttons only when user is NOT authenticated -->
                    <div sec:authorize="!isAuthenticated()">
                        <a th:href="@{/login}" class="btn btn-secondary">–í—Ö–æ–¥</a>
                        <a th:href="@{/user/register}" class="btn btn-primary">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                    </div>

                    <!-- Show this when user IS authenticated -->
                    <div sec:authorize="isAuthenticated()" class="user-info">
                        <!-- Admin Panel Button - Only for ADMIN users -->
                        <a sec:authorize="hasRole('ADMIN')" th:href="@{/admin/dashboard}" class="btn btn-warning" style="display: flex; align-items: center; gap: 5px;">
                            <span>‚öôÔ∏è</span>
                            <span>–ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª</span>
                        </a>
                        <span class="user-welcome">–ó–¥—Ä–∞–≤–µ–π, <strong sec:authentication="name">User</strong>!</span>
                        <form th:action="@{/logout}" method="post" style="display: inline;">
                            <button type="submit" class="btn btn-danger">–ò–∑—Ö–æ–¥</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <nav>
        <div class="container">
            <div class="nav-content">
                <ul class="nav-links">
                    <li><a th:href="@{/}" class="active">–ù–∞—á–∞–ª–æ</a></li>
                    <li><a th:href="@{/forum}">–§–æ—Ä—É–º</a></li>
                    <li><a th:href="@{/news}">–ù–æ–≤–∏–Ω–∏</a></li>
                    <li><a th:href="@{/fights}">–ë–æ–µ–≤–µ</a></li>
                    <li><a th:href="@{/analysis}">–ê–Ω–∞–ª–∏–∑–∏</a></li>
                    <li><a th:href="@{/members}">–ß–ª–µ–Ω–æ–≤–µ</a></li>
                    <!-- Admin Panel Link - Only visible to ADMIN users -->
                    <li sec:authorize="hasRole('ADMIN')">
                        <a th:href="@{/admin/dashboard}" style="background: linear-gradient(45deg, #d4af37, #ffd700); color: #000; padding: 10px 15px; border-radius: 20px; font-weight: bold;">‚öôÔ∏è –ê–¥–º–∏–Ω</a>
                    </li>
                </ul>
                <div class="search-form-nav">
                    <form th:action="@{/search}" method="get" class="search-form-inline">
                        <input type="text" name="query" placeholder="üîç –¢—ä—Ä—Å–µ–Ω–µ..." class="search-input-inline" required minlength="2">
                        <button type="submit" class="btn-search-inline">–¢—ä—Ä—Å–∏</button>
                    </form>
                </div>
            </div>
        </div>
    </nav>

    <main class="container">
        <!-- Success message after login -->
        <div th:if="${param.login}" class="alert alert-success" role="alert">
            ‚úÖ –£—Å–ø–µ—à–Ω–æ –≤–ª—è–∑–æ—Ö—Ç–µ –≤ —Å–∏—Å—Ç–µ–º–∞—Ç–∞! –î–æ–±—Ä–µ –¥–æ—à–ª–∏!
        </div>

        <!-- Success message after registration -->
        <div th:if="${successMessage}" class="alert alert-success" role="alert">
            ‚úÖ <span th:text="${successMessage}">Success!</span>
        </div>

        <section class="hero" sec:authorize="!isAuthenticated()">
            <div class="container">
                <h2>–î–æ–±—Ä–µ –¥–æ—à–ª–∏ –≤ UFC –ë—ä–ª–≥–∞—Ä–∏—è</h2>
                <p>–ù–∞–π-–≥–æ–ª–µ–º–∏—è—Ç –±—ä–ª–≥–∞—Ä—Å–∫–∏ —Ñ–æ—Ä—É–º –∑–∞ UFC, MMA –∏ –±–æ–π–Ω–∏ —Å–ø–æ—Ä—Ç–æ–≤–µ. –ü—Ä–∏—Å—ä–µ–¥–∏–Ω–µ—Ç–µ —Å–µ –∫—ä–º –æ–±—â–Ω–æ—Å—Ç—Ç–∞ –∏ —Å–ø–æ–¥–µ–ª–µ—Ç–µ —Å—Ç—Ä–∞—Å—Ç—Ç–∞ —Å–∏ –∫—ä–º –æ–∫—Ç–∞–≥–æ–Ω–∞!</p>
                <a th:href="@{/user/register}" class="btn btn-primary">–ü—Ä–∏—Å—ä–µ–¥–∏–Ω–µ—Ç–µ —Å–µ —Å–µ–≥–∞</a>
            </div>
        </section>

        <section class="hero" sec:authorize="isAuthenticated()">
            <div class="container">
                <h2>–î–æ–±—Ä–µ –¥–æ—à–ª–∏ –æ–±—Ä–∞—Ç–Ω–æ, <span sec:authentication="name">User</span>!</h2>
                <p>–ì–æ—Ç–æ–≤–∏ –ª–∏ —Å—Ç–µ –¥–∞ –æ–±—Å—ä–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ç–µ –±–æ–µ–≤–µ –∏ –¥–∞ —Å–ø–æ–¥–µ–ª–∏—Ç–µ –≤–∞—à–∏—Ç–µ –ø—Ä–æ–≥–Ω–æ–∑–∏?</p>
            </div>
        </section>

        <div class="content-grid">
            <section class="forum-categories">
                <h3>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–∞ —Ñ–æ—Ä—É–º–∞</h3>
                <div class="category-list">
                    <a th:href="@{/forum/category/GENERAL_UFC}" class="category-item" tabindex="0" role="button" aria-label="–û–±—â–∏ –¥–∏—Å–∫—É—Å–∏–∏ –∑–∞ UFC">
                        <div class="category-title">ü•ä –û–±—â–∏ –¥–∏—Å–∫—É—Å–∏–∏ –∑–∞ UFC</div>
                        <div class="category-desc">–û–±—Å—ä–∂–¥–∞–π—Ç–µ –≤—Å–∏—á–∫–æ —Å–≤—ä—Ä–∑–∞–Ω–æ —Å UFC - –±–æ–µ–≤–µ, –±–æ–π—Ü–∏, –Ω–æ–≤–∏–Ω–∏ –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ –Ω–∞ —Å–ø–æ—Ä—Ç–∞</div>
                    </a>
                    <a th:href="@{/forum/category/UPCOMING_EVENTS}" class="category-item" tabindex="0" role="button" aria-label="–ü—Ä–µ–¥—Å—Ç–æ—è—â–∏ —Å—ä–±–∏—Ç–∏—è">
                        <div class="category-title">üìÖ –ü—Ä–µ–¥—Å—Ç–æ—è—â–∏ —Å—ä–±–∏—Ç–∏—è</div>
                        <div class="category-desc">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏ –¥–∏—Å–∫—É—Å–∏–∏ –∑–∞ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏ UFC —Å—ä–±–∏—Ç–∏—è –∏ –±–æ–µ–≤–µ</div>
                    </a>
                    <a th:href="@{/forum/category/FIGHT_ANALYSIS}" class="category-item" tabindex="0" role="button" aria-label="–ê–Ω–∞–ª–∏–∑–∏ –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏">
                        <div class="category-title">üìä –ê–Ω–∞–ª–∏–∑–∏ –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏</div>
                        <div class="category-desc">–°–ø–æ–¥–µ–ª–µ—Ç–µ –≤–∞—à–∏—Ç–µ –∞–Ω–∞–ª–∏–∑–∏, –ø—Ä–æ–≥–Ω–æ–∑–∏ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∑–∞ –∑–∞–ª–∞–≥–∞–Ω–µ</div>
                    </a>
                    <a th:href="@{/forum/category/UFC_HISTORY}" class="category-item" tabindex="0" role="button" aria-label="–ò—Å—Ç–æ—Ä–∏—è –Ω–∞ UFC">
                        <div class="category-title">üèÜ –ò—Å—Ç–æ—Ä–∏—è –Ω–∞ UFC</div>
                        <div class="category-desc">–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∏ –±–æ–µ–≤–µ, –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏ –º–æ–º–µ–Ω—Ç–∏ –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ –Ω–∞ –ø—Ä–æ–º–æ—Ü–∏—è—Ç–∞</div>
                    </a>
                    <a th:href="@{/forum/category/BULGARIAN_FIGHTERS}" class="category-item" tabindex="0" role="button" aria-label="–ë—ä–ª–≥–∞—Ä—Å–∫–∏ –±–æ–π—Ü–∏">
                        <div class="category-title">üáßüá¨ –ë—ä–ª–≥–∞—Ä—Å–∫–∏ –±–æ–π—Ü–∏</div>
                        <div class="category-desc">–°–ª–µ–¥–µ—Ç–µ –∏ –ø–æ–¥–∫—Ä–µ–ø—è–π—Ç–µ –±—ä–ª–≥–∞—Ä—Å–∫–∏—Ç–µ –±–æ–π—Ü–∏ –≤ UFC –∏ MMA</div>
                    </a>
                </div>
                <div class="forum-link-container">
                    <a th:href="@{/forum}" class="btn btn-primary forum-link-btn">–ö—ä–º —Ñ–æ—Ä—É–º–∞ ‚Üí</a>
                </div>
            </section>

            <aside class="sidebar">
                <section class="sidebar-section">
                    <h4>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –Ω–∞ —Ñ–æ—Ä—É–º–∞</h4>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-number" th:text="${activeUserCount} ?: '1,247'">1,247</div>
                            <div class="stat-label">–ß–ª–µ–Ω–æ–≤–µ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">15,892</div>
                            <div class="stat-label">–¢–µ–º–∏</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">67,543</div>
                            <div class="stat-label">–ü–æ—Å—Ç–æ–≤–µ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">142</div>
                            <div class="stat-label">–û–Ω–ª–∞–π–Ω</div>
                        </div>
                    </div>
                </section>

                <section class="sidebar-section">
                    <h4>–ü–æ—Å–ª–µ–¥–Ω–∏ —Ç–µ–º–∏</h4>
                    <ul class="recent-topics">
                        <li th:if="${recentTopics == null or recentTopics.isEmpty()}" style="color: #999; font-style: italic;">
                            –í—Å–µ –æ—â–µ –Ω—è–º–∞ —Å—ä–∑–¥–∞–¥–µ–Ω–∏ —Ç–µ–º–∏. –ë—ä–¥–µ—Ç–µ –ø—ä—Ä–≤–∏!
                        </li>
                        <li th:each="topic : ${recentTopics}">
                            <a th:href="@{/forum/topic/{id}(id=${topic.id})}"
                               th:title="'–ü—Ä–æ—á–µ—Ç–∏ –ø–æ–≤–µ—á–µ –∑–∞: ' + ${topic.title}"
                               style="display: flex; align-items: center; gap: 0.5rem; text-decoration: none; color: #6495ed; padding: 0.5rem; border-radius: 5px; transition: all 0.2s;">
                                <span th:if="${topic.isPinned}" style="color: #ffd700;" title="–ü—Ä–∏–∫–∞—á–µ–Ω–∞ —Ç–µ–º–∞">üìå</span>
                                <span th:text="${topic.category.icon}" style="font-size: 1.2rem;"></span>
                                <span style="flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                                    <span th:text="${topic.title}" style="font-weight: 500;"></span>
                                    <span style="display: block; font-size: 0.75rem; color: #999; margin-top: 0.2rem;">
                                        <span th:text="${topic.authorUsername}"></span> ‚Ä¢
                                        <span th:text="${#temporals.format(topic.createdAt, 'dd.MM.yyyy HH:mm')}"></span>
                                    </span>
                                </span>
                                <span style="display: flex; gap: 0.5rem; font-size: 0.8rem; color: #999;">
                                    <span th:title="'–û—Ç–≥–æ–≤–æ—Ä–∏: ' + ${topic.replyCount}">üí¨ <span th:text="${topic.replyCount}"></span></span>
                                    <span th:title="'–ü—Ä–µ–≥–ª–µ–¥–∏: ' + ${topic.viewCount}">üëÅ <span th:text="${topic.viewCount}"></span></span>
                                </span>
                            </a>
                        </li>
                    </ul>
                    <div style="margin-top: 1rem; text-align: center;">
                        <a th:href="@{/forum}" class="btn btn-secondary" style="width: 100%; padding: 0.5rem;">–í—Å–∏—á–∫–∏ —Ç–µ–º–∏ ‚Üí</a>
                    </div>
                </section>

                <section class="sidebar-section">
                    <h4>–ü—Ä–µ–¥—Å—Ç–æ—è—â–æ —Å—ä–±–∏—Ç–∏–µ</h4>
                    <div style="text-align: center;">
                        <div style="background: linear-gradient(45deg, #d4af37, #ffd700); color: #000; padding: 1rem; border-radius: 10px; margin-bottom: 1rem;">
                            <strong>UFC 296</strong><br>
                            <time datetime="2024-12-16">16 –î–µ–∫–µ–º–≤—Ä–∏ 2024</time>
                        </div>
                        <p style="color: #cccccc;">–ù–µ –ø—Ä–æ–ø—É—Å–∫–∞–π—Ç–µ –≥–æ–ª—è–º–æ—Ç–æ —Å—ä–±–∏—Ç–∏–µ! –û–±—Å—ä–¥–µ—Ç–µ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ç–µ —Å–∏ –≤ –Ω–∞—à–∏—è —Ñ–æ—Ä—É–º.</p>
                    </div>
                </section>
            </aside>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h5>–ó–∞ –Ω–∞—Å</h5>
                    <p>UFC –ë—ä–ª–≥–∞—Ä–∏—è –µ –Ω–µ–∑–∞–≤–∏—Å–∏–º —Ñ–æ—Ä—É–º, —Å—ä–∑–¥–∞–¥–µ–Ω –æ—Ç —Ñ–µ–Ω–æ–≤–µ –∑–∞ —Ñ–µ–Ω–æ–≤–µ –Ω–∞ UFC –∏ MMA —Å–ø–æ—Ä—Ç–∞ –≤ –ë—ä–ª–≥–∞—Ä–∏—è.</p>
                </div>
                <div class="footer-section">
                    <h5>–ü–æ–ª–µ–∑–Ω–∏ –≤—Ä—ä–∑–∫–∏</h5>
                    <a th:href="@{/info/rules}" title="–ü—Ä–∞–≤–∏–ª–∞ –Ω–∞ —Ñ–æ—Ä—É–º–∞">–ü—Ä–∞–≤–∏–ª–∞ –Ω–∞ —Ñ–æ—Ä—É–º–∞</a>
                    <a th:href="@{/info/faq}" title="–ß–µ—Å—Ç–æ –∑–∞–¥–∞–≤–∞–Ω–∏ –≤—ä–ø—Ä–æ—Å–∏">–ß–µ—Å—Ç–æ –∑–∞–¥–∞–≤–∞–Ω–∏ –≤—ä–ø—Ä–æ—Å–∏</a>
                    <a th:href="@{/info/contact}" title="–ö–æ–Ω—Ç–∞–∫—Ç–∏">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a>
                </div>
                <div class="footer-section">
                    <h5>–ü–æ—Å–ª–µ–¥–≤–∞–π—Ç–µ –Ω–∏</h5>
                    <a href="https://facebook.com" title="Facebook —Å—Ç—Ä–∞–Ω–∏—Ü–∞" target="_blank" rel="noopener noreferrer">Facebook</a>
                    <a href="https://instagram.com" title="Instagram –ø—Ä–æ—Ñ–∏–ª" target="_blank" rel="noopener noreferrer">Instagram</a>
                    <a href="https://youtube.com" title="YouTube –∫–∞–Ω–∞–ª" target="_blank" rel="noopener noreferrer">YouTube</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 UFC –ë—ä–ª–≥–∞—Ä–∏—è –§–æ—Ä—É–º. –í—Å–∏—á–∫–∏ –ø—Ä–∞–≤–∞ –∑–∞–ø–∞–∑–µ–Ω–∏. –¢–æ–∑–∏ —Å–∞–π—Ç –Ω–µ –µ —Å–≤—ä—Ä–∑–∞–Ω –æ—Ñ–∏—Ü–∏–∞–ª–Ω–æ —Å UFC.</p>
            </div>
        </div>
    </footer>
</body>
</html>